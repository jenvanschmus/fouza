---
import fs from 'node:fs';
import path from 'node:path';

// Fetch external links from the public folder
const linksDir = path.resolve('./public/external-links');
const folders = fs.existsSync(linksDir) ? fs.readdirSync(linksDir) : [];

const externalLinks = folders.map(folder => {
  const linkPath = path.join(linksDir, folder, 'link.txt');
  const url = fs.readFileSync(linkPath, 'utf-8').trim();
  return {
    name: folder,
    url: url,
    icon: `/external-links/${folder}/icon.png`
  };
});
---

<header class="fixed top-0 left-0 w-full h-20 bg-white shadow-lg shadow-black/5 flex items-center justify-between px-8 z-50">
  <div class="flex-shrink-0">
    <a href="/">
      <img src="/site-assets/home-logo.png" alt="Home Logo" class="h-12 w-auto object-contain" />
    </a>
  </div>

  <nav class="flex items-center gap-8">
    <div class="flex gap-6 text-sm font-medium tracking-widest uppercase text-gray-700">
      <a href="/gallery" class="hover:text-gold-600 transition-colors">Gallery</a>
      <a href="/about" class="hover:text-gold-600 transition-colors">About</a>
      <a href="/contact" class="hover:text-gold-600 transition-colors">Contact</a>
    </div>

    <div class="h-6 w-[1px] bg-gray-200"></div>

    <div class="flex gap-4">
      {externalLinks.map(link => (
        <a href={link.url} target="_blank" rel="noopener noreferrer" title={link.name}>
          <img src={link.icon} alt={link.name} class="w-5 h-5 opacity-70 hover:opacity-100 transition-opacity" />
        </a>
      ))}
    </div>
  </nav>
</header>
